<!DOCTYPE html>
<html lang="en">
  <head>
  </head>
  <body>
    <p>
      <button onclick="anim3();">weeeeeee</button>   
    </p> 
  

    <pre id="d" style="background-color:#000; color:#ccc; font-size: 10pt;"> </pre>
                                                                                                
    
    <script>
      var bar=[];
      var zoo=[];
      (function() {       
      var _onload = function() {
        var pretag = document.getElementById('d');
        var canvastag = document.getElementById('canvasdonut');
        var squaretag = document.getElementById('square')
        var tmr1 = undefined, tmr2 = undefined;
        var tmr3 = undefined;
        var A=-0, B=0;
        var a = 1.1, b = -0.5, c = 4.0;
        var light_vector = [0,0,1]


        var squareframe=function(){

        for(var k=0;k<1760;k++) {
          bar[k]=k%80 == 79 ? "\n" : " ";
          zoo[k]=0;
        };
        b -= 0.2;
        c += 0.1;
        var x = [1,0,0];
        var y = [0,1,0];  
        var z = [0,0,1];
        
        var cA = Math.cos(a), sA = Math.sin(a),
        cB = Math.cos(b), sB = Math.sin(b),
        cC = Math.cos(c), sC = Math.sin(c);
        x = calc(x)
        y = calc(y)
        z = calc(z)
        
        
        for(var j = 0; j<=1; j+= 0.05){
          x1 = vectorMult(x, j)
          y1 = vectorMult(y, j)
          z1 = vectorMult(z, j)
          for(var i = 0; i<=1; i+= 0.05){
            xprime = vectorMult(x,i)
            yprime = vectorMult(y,i)
            zprime = vectorMult(z,i)
            plot(vectorSum(x1,yprime),vectorMult(z,1))
            plot(vectorSum(x1,zprime),vectorMult(y,1))
            plot(vectorSum(y1,xprime),vectorMult(z,1))
            plot(vectorSum(y1,zprime),vectorMult(x,1))
            plot(vectorSum(z1,xprime),vectorMult(y,1))
            plot(vectorSum(z1,yprime),vectorMult(x,1))
            plot(vectorSum2(x,z1,yprime), vectorMult(x,-1))
            plot(vectorSum2(x,y1,zprime), vectorMult(x,-1))
            plot(vectorSum2(y,x1,zprime), vectorMult(y,-1)) 
            plot(vectorSum2(y,z1,xprime), vectorMult(y,-1))
            plot(vectorSum2(z,x1,yprime), vectorMult(z,-1)) 
            plot(vectorSum2(z,y1,xprime), vectorMult(z,-1))
          }

        }
        pretag.innerHTML = bar.join("");
function calc(arr){

          
var n = [0,0,0]
n[0] = arr[0] * (cC * cB) + arr[1] * (-sC*cA + cC * sB * sA) + arr[2] * (sC * sA + cC * sB * cA)
n[1] = arr[0] * (sC * cB) + arr[1] * (cC*cA + sC * sB * sA) + arr[2] * (-cC * sA + sC * sB * cA)
n[2] = arr[0] * (-sB) + arr[1] * (cB*sA) + arr[2] * (cB*cA)
return(n)
}

function vectorMult(arr,val){
  var a = [0,0,0]
  for(var xee = 0; xee <3; xee++){
    a[xee] = arr[xee] * val
  }
return(a)
}
function vectorSum(arr1,arr2){
  var a = [0,0,0]
for(var xy = 0; xy <3; xy++){
  a[xy] = arr1[xy] + arr2[xy]
}
return(a)
}
function dotProduct(arr1,arr2){
  var curr = 0
  for(var xee = 0; xee <3; xee++){
    curr += arr1[xee] + arr2[xee]
  }
  return curr
}
function vectorSum2(arr1,arr2,arr3){
  var a = [0,0,0]
for(var xyz = 0; xyz <3; xyz++){
  a[xyz] = arr1[xyz] + arr2[xyz] + arr3[xyz]
}
return(a)  
}
function plot(arr, normal){
  //opp = !opp
  var light = dotProduct(normal, light_vector);
  var xplot = arr[0],
  yplot = arr[1],
  zplot = 1/(arr[2] + 2.4); 
  var xp=0|(xplot * zplot*30 +40),
      yp=0|(-yplot * zplot*15 + 12),
      o=xp+80*yp;
      N=0|(3*light)
  var l = 0;
  if(yp<22 && yp>=0 && xp>=0 && xp<79 && zplot>zoo[o]){
    zoo[o]=zplot;
    bar[o]=".,-~:;=!*#$@"[N>0?N:0];
  }
}

      }
        // This is copied, pasted, reformatted, and ported directly from my original
        // donut.c code
      window.anim3 = function() {
        if(tmr3 === undefined) {
          tmr3 = setInterval(squareframe, 50);
        } else {
          clearInterval(tmr3);
          tmr3 = undefined;
        }
      }
        squareframe();
      }
      
      if(document.all)
        window.attachEvent('onload',_onload);
      else
        window.addEventListener("load",_onload,false);
      })();
    </script>
  </body>
  
</html>
